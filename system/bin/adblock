#!/system/bin/busybox sh
set -e

CFILE="/data/userdata/adblock"

if [[ ! "$1" ]];
then
    echo "$0 [0 or 1]"
    # Make sure the file exist
    touch "$CFILE"
    AB_ENABLED="$(cat $CFILE)"
    [[ "$AB_ENABLED" == "1" ]] && AB_ENABLED="enabled"
    [[ "$AB_ENABLED" == "0" ]] || [[ "$AB_ENABLED" == "" ]] && AB_ENABLED="disabled"
    echo "Adblock status: $AB_ENABLED"
    exit 1
fi

if [[ "$1" != "0" ]] && [[ "$1" != "1" ]];
then
    echo "Wrong value!"
    exit 2
fi

echo "$1" > $CFILE
/etc/adblock.sh "$1"
